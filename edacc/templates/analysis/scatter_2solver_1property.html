{% from "_formhelpers.html" import render_field, render_radio_field %}
{% extends "base.html" %}
{% block title %}Compare the results of two solvers{% endblock %}
{% block head %}
    {{ super() }}
    {% if form.solver_config1.data and form.solver_config2.data %}
    <script src="/static/js/jquery.tablesorter.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $.ajax({
              {% autoescape false %}
              url: "{{url_for('plot.scatter_2solver_1property', database=database, experiment_id=experiment.idExperiment)}}?{{GET_data}}&imagemap",
              dataType: 'json',
              success: function(data) {
                $.each(data['data'], function(ix, val) {
                    $('#map_instances').append('<area shape="circle" coords="'+val['x']+','+val['y']+',5" href="'+val['url']+'" title="'+val['alt']+'"');
                })
              }
              {% endautoescape %}
            });
        });
    </script>
    {% endif %}
{% endblock %}
{% block content %}
    <div class="navigation">
        Â» <a href="{{url_for('frontend.experiments_index', database=database)}}">Experiments</a> ::
        <a href="{{url_for('frontend.experiment', database=database, experiment_id=experiment.idExperiment)}}">{{experiment.name}}</a> ::
        Analysis
    </div>
    <div style="margin: 5px; float: left;">
        <h2>Compare the results of two solvers</h2>
        <div style="margin-bottom: 5px;">
        Choose two solvers to plot their result properties on the instances of<br/>
        the experiment against each other in a scatter plot.
        </div>
        <form method="get" action="{{url_for('analysis.scatter_2solver_1property', database=database, experiment_id=experiment.idExperiment)}}">
            <table>
            {{ render_field(form.solver_config1) }}
            {{ render_field(form.solver_config2) }}
            {{ render_field(form.run) }}
            {{ render_field(form.instances, explanation='Hold Ctrl to select multiple instances.') }}
            {{ render_radio_field(form.scaling) }}
            <tr><td><input type="submit" value="Show" /></td></tr>
            </table>
        </form>
    </div>
    {% if form.solver_config1.data and form.solver_config2.data %}
        {% autoescape false %}
        <div style="text-align: center; margin-left: 20px; margin-bottom: 20px; float: left;">
            <img usemap="#map_instances" alt="graph" style="margin: 10px;" src="{{url_for('plot.scatter_2solver_1property', database=database, experiment_id=experiment.idExperiment)}}?{{GET_data}}" /><br/>
            Download as <a href="{{url_for('plot.scatter_2solver_1property', database=database, experiment_id=experiment.idExperiment)}}?{{GET_data}}&pdf">PDF</a>
            <map id="map_instances" name="map_instances"/>
        </div>
        {% endautoescape %}
    {% endif %}
{% endblock %}